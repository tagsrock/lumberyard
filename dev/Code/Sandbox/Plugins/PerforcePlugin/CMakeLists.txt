set(THIS_PROJECT PerforcePlugin)

project( ${THIS_PROJECT} )


#START-FILE-LIST
# File List auto generated by waf2cmake.py, do not modify manually.

set (SourceGroup_Root
	PasswordDlg.cpp
	PasswordDlg.h
	PerforcePlugin.cpp
	PerforcePlugin.h
	PerforcePlugin.rc
	PerforceSourceControl.cpp
	PerforceSourceControl.h
	main.cpp
	resource.h
	stdafx.cpp
	stdafx.h
)


# Support unity build with uber files
set(NoUberFile ${SourceGroup_Root}  )


set (SOURCES
	${NoUberFile}
)
#END-FILE-LIST

if(MSVC)
	# Switch from dynamic link crt to static link crt /MD to /MT
	string(REGEX REPLACE "/MD" "/MT" CMAKE_CXX_FLAGS_PROFILE ${CMAKE_CXX_FLAGS_PROFILE})
	string(REGEX REPLACE "/MD" "/MT" CMAKE_CXX_FLAGS_RELEASE ${CMAKE_CXX_FLAGS_RELEASE})
	string(REGEX REPLACE "/MDd" "/MTd" CMAKE_CXX_FLAGS_DEBUG ${CMAKE_CXX_FLAGS_DEBUG})
endif()

include_directories( ../../Editor )
include_directories( ../../Editor/Include )

include_directories( ${SDK_DIR}/p4api/include )

add_definitions(-DNOT_USE_CRY_MEMORY_MANAGER)
add_definitions(-DPLUGIN_EXPORTS)
add_definitions(/EHsc)

add_library( ${THIS_PROJECT} ${SOURCES})

target_link_libraries(${THIS_PROJECT} debug ${SDK_DIR}/p4api/x64/Debug/libclient.lib)
target_link_libraries(${THIS_PROJECT} debug ${SDK_DIR}/p4api/x64/Debug/libp4sslstub.lib)
target_link_libraries(${THIS_PROJECT} debug ${SDK_DIR}/p4api/x64/Debug/librpc.lib)
target_link_libraries(${THIS_PROJECT} debug ${SDK_DIR}/p4api/x64/Debug/libsupp.lib)

target_link_libraries(${THIS_PROJECT} optimized ${SDK_DIR}/p4api/x64/Release/libclient.lib)
target_link_libraries(${THIS_PROJECT} optimized ${SDK_DIR}/p4api/x64/Release/libp4sslstub.lib)
target_link_libraries(${THIS_PROJECT} optimized ${SDK_DIR}/p4api/x64/Release/librpc.lib)
target_link_libraries(${THIS_PROJECT} optimized ${SDK_DIR}/p4api/x64/Release/libsupp.lib)

SET_PLATFORM_TARGET_PROPERTIES( ${THIS_PROJECT} )
